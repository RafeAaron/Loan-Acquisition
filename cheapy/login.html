<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Group Assignment</title>
    <link rel="stylesheet" href="./assets/base.css">
    <link rel="stylesheet" href="./assets/login.css">
</head>
<body>
    <form id="login_form">

        <p class="form-heading">Glad to have you back</p>

        <label for="email">Email</label><br />
        <input type="email" name="user_email" placeholder="john-doe@gmail.com" id="email" required><br />
        <label for="password">Password</label><br />
        <input type="password" name="user_password" placeholder="******" id="password" required><br />

        <input type="submit" value="Login">

        <p id="signup-redirect" class="signup-alternative">Don't have an account? <span>Sign Up</span></p>
    </form>

    <script>
        const form = document.getElementById('login_form');

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            musthave = ['@', '.com'];
            started = false;
            

            hasrequirement1 = false;
            hasrequirement2 = false;

            //Add login form validation here
            username = document.getElementById('email')
            password = document.getElementById('password')

            usernamelength = username.value.length;

            //password validation
            if(password.value.length < 8) alert("Please enter a password that is above 8 characters")

            //email validaton
            for(let a = 0; a < username.value.length; a++){
                if(!started){
                    started = true;
                }

                if(username.value[a] == musthave[0]) hasrequirement1 = true;
            }

            console.log(username.value[usernamelength - 1])

            if(username.value[usernamelength - 1] == 'm' && username.value[usernamelength - 2] == 'o' && username.value[usernamelength - 3] == 'c' && username.value[usernamelength - 4] == '.') hasrequirement2 = true;

            if(hasrequirement1 && hasrequirement2) {alert('Email valid');}
            else{
                alert('Invalid email entered');
            }
            //Add redirection code
            window.localStorage.setItem("email", document.getElementById('email').value)

            window.location.href = './welcome.html';

        })

        document.getElementById('signup-redirect').addEventListener('click', ()=> {
            window.location.href="./signup.html"
        })
    </script>
</body>
</html>